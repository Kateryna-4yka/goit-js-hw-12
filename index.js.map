{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\n\n//імортуємо ахіос\n\nimport axios from \"axios\";\n\nexport function httpRequest (userRequest, page) {\n  return axios.get (`https://pixabay.com/api/?`, {params: {\n    q: userRequest,\n    key: `48292121-37734ba9461bf6417934fa015`,\n    image_type: `photo`, \n    orientation: `horizontal`,\n    safesearch : true,\n    per_page: 15,\n    page: page,}\n})}","// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\n\nexport function createCart (element) {\n\n    return ` \n        <li class=\"li-gallery\">\n\n        <a class=\"li-gallery-a\" href=\"${element.largeImageURL}\">\n        <img class=\"img\" src=\"${element.webformatURL}\" \n        alt=\"${element.tags}\" \n        />\n        </a>\n        <ul class=\"baner-info\">\n          <li class=\"baner-info-li\">\n            <p class=\"baner-info-li-title\">Likes</p>\n            <p class=\"baner-info-li-text\">${element.likes}</p>\n          </li>\n          <li class=\"baner-info-li\">\n            <p class=\"baner-info-li-title\">Views</p>\n            <p class=\"baner-info-li-text\">${element.views}</p>\n          </li>\n          <li class=\"baner-info-li\">\n            <p class=\"baner-info-li-title\">Comments</p>\n            <p class=\"baner-info-li-text\">${element.comments}</p>\n          </li>\n          <li class=\"baner-info-li\">\n            <p class=\"baner-info-li-title\">Downloads</p>\n            <p class=\"baner-info-li-text\">${element.downloads}</p>\n          \n            </li>\n        </ul>\n        </li> `;\n}\n\n","// izitoast\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n// simplelightbox\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n//імпортуємо свої функції для НТТР та відмальовування на сторінці лішок\nimport {httpRequest} from \"./js/pixabay-api\";\nimport {createCart} from \"./js/render-functions\";\n\n\n\nconst form = document.querySelector (`.form`);\nconst ulGallery = document.querySelector (`.ul-gallery`);\nconst button = document.querySelector ('.button');\nconst loader = document.querySelector ('.loader');\nconst loadButton = document.querySelector ('.loadButton');\nform.addEventListener (`submit`, request);\n\nlet page = 1;\nlet valueInfo = '';\nlet totalPages = 0; \n\nasync function request (event) {\ntry {\n  //лоадер стає видимим\n  loader.classList.toggle (`visually-hidden`);\n// подія сабмін робить оновлення сторінки, ми це скидаємо \nevent.preventDefault();\n\n//можна звернутися до input.value , але це зайвий раз звертатися до дерева , тому ідемо через event.currentTarget.elements.(ім,я з name HTML) + .trim(), щоб не було пробілів\n//считуємо значення з інпуту\nvalueInfo = event.currentTarget.elements.user_request.value.trim(); \n\n//перевіряємо, щоб не вводили пусте в інпут + HYML перевірка задана\nif (valueInfo ==='') {button.disabled = true; return;}\n\n//робимо запит за пайдж 1, щоб кожен новий запит ішов за першою сторінкою та галерея очищувалася від картинок\npage = 1;\nulGallery.innerHTML = '';\n//робимо запит на сервер pixabay.com за своїм клієнт ключем та параметрами з документації АРІ\nconst serverInform = await httpRequest (valueInfo, page);\n\n//перевірка результатів з сервера, чи прийшли данні\nif (serverInform.data.hits.length === 0) {\n  loader.classList.toggle (`visually-hidden`);\n  iziToast.error({\n    position: 'topRight' ,\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\nulGallery.innerHTML = '';\nform.reset();\nreturn;}\n\n//вираховуємо кількість сторінок для відмальовування по нашому запиту\ntotalPages = Math.ceil(serverInform.data.totalHits/15); \n\n//якщо інформація що прийшла з сервера більша за 1 сторінку (тобто, 15 картинок), тоді кнопка видима, слухаємо клік \nif (totalPages>1) {loadButton.classList.remove (`visually-hidden`);\n  loadButton.addEventListener ('click', loadMore);}\n\nconst gallaryCard = serverInform.data.hits.map(el =>createCart(el)).join('');\n// метод меп перебирає масив об,єктів і видає на кожній ітерації 1 обєкт , який заповнений рядками з описами кожної картки \n//але нам потрібен 1 рядок, а не масив рядків, тому ми викликаємо метод .join  і зшиваємо це до купи\n//робимо функцію createCart, яка буде перетворювати отримані данні з сервера на розмітку на сторінці. Створювати картку в HTML з данними, які прийшли з сервера. \n\n//відмальовуємо на сторінці\nulGallery.insertAdjacentHTML('beforeend', gallaryCard);\n//відмальовування почалося і лоадер сховався\nloader.classList.toggle (`visually-hidden`);\n//спустошуємо інпут у формі\nform.reset();\n\n//відмальовуємо великі зображення за допомогою бібліотеки SimpleLightbox\nconst elemSimpleLightbox = new SimpleLightbox(`.ul-gallery a`, {\n  captionsData: `alt`, \n});\nelemSimpleLightbox.refresh();\n}\n catch (er) { alert (er)}}\n\n\n\n//слухач викликає функцію запиту на сервер за page++\n async function loadMore (event){\n  page++;\n  try {\n    //робимо видимим лоадер при завантаженні інформації\n    loader.classList.toggle (`visually-hidden`);\n\n  //робимо запит на сервер за наступною сторінкою інформації\n  const serverInform = await httpRequest (valueInfo, page);\n\n\n//якщо інформація поділена на кожну сторінку вже дорівнює кількості сторінок , то вимикаємо кнопку ЛОАД МОР\nif (totalPages === page)\n  {loadButton.classList.add (`visually-hidden`); \n    loadButton.removeEventListener('click', loadMore);\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight' ,\n  });}\n\n  const gallaryCard = serverInform.data.hits.map(el =>createCart(el)).join('');\n//перебираємо масив інформації та видаємо її у вигляді рядка для запису на сторінку \n  \n  //додаємо на сторінку\n  ulGallery.insertAdjacentHTML('beforeend', gallaryCard);\n  //ховаємо лоадер після відмальовування\n  loader.classList.toggle (`visually-hidden`);\n  \n  //відмальовуємо великі зображення за допомогою бібліотеки SimpleLightbox\n  const elemSimpleLightbox = new SimpleLightbox(`.ul-gallery a`, {\n    captionsData: `alt`, \n  });\n  elemSimpleLightbox.refresh();\n  }\n  \n   catch (er) {console.log(er);}}"],"names":["httpRequest","userRequest","page","axios","createCart","element","form","ulGallery","button","loader","loadButton","request","valueInfo","totalPages","event","serverInform","iziToast","loadMore","gallaryCard","el","SimpleLightbox","er"],"mappings":"owBAOO,SAASA,EAAaC,EAAaC,EAAM,CAC9C,OAAOC,EAAM,IAAK,4BAA6B,CAAC,OAAQ,CACtD,EAAGF,EACH,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAa,GACb,SAAU,GACV,KAAMC,CAAM,CAChB,CAAC,CAAC,CCbK,SAASE,EAAYC,EAAS,CAEjC,MAAO;AAAA;AAAA;AAAA,wCAG6BA,EAAQ,aAAa;AAAA,gCAC7BA,EAAQ,YAAY;AAAA,eACrCA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAMiBA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,4CAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,4CAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,4CAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,eAK7D,CCpBA,MAAMC,EAAO,SAAS,cAAe,OAAO,EACtCC,EAAY,SAAS,cAAe,aAAa,EACjDC,EAAS,SAAS,cAAe,SAAS,EAC1CC,EAAS,SAAS,cAAe,SAAS,EAC1CC,EAAa,SAAS,cAAe,aAAa,EACxDJ,EAAK,iBAAkB,SAAUK,CAAO,EAExC,IAAIT,EAAO,EACPU,EAAY,GACZC,EAAa,EAEjB,eAAeF,EAASG,EAAO,CAC/B,GAAI,CAWJ,GATEL,EAAO,UAAU,OAAQ,iBAAiB,EAE5CK,EAAM,eAAc,EAIpBF,EAAYE,EAAM,cAAc,SAAS,aAAa,MAAM,OAGxDF,IAAa,GAAI,CAACJ,EAAO,SAAW,GAAM,MAAO,CAGrDN,EAAO,EACPK,EAAU,UAAY,GAEtB,MAAMQ,EAAe,MAAMf,EAAaY,EAAWV,CAAI,EAGvD,GAAIa,EAAa,KAAK,KAAK,SAAW,EAAG,CACvCN,EAAO,UAAU,OAAQ,iBAAiB,EAC1CO,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0EACb,CAAC,EACDT,EAAU,UAAY,GACtBD,EAAK,MAAK,EACV,MAAO,CAGPO,EAAa,KAAK,KAAKE,EAAa,KAAK,UAAU,EAAE,EAGjDF,EAAW,IAAIH,EAAW,UAAU,OAAQ,iBAAiB,EAC/DA,EAAW,iBAAkB,QAASO,CAAQ,GAEhD,MAAMC,EAAcH,EAAa,KAAK,KAAK,IAAII,GAAKf,EAAWe,CAAE,CAAC,EAAE,KAAK,EAAE,EAM3EZ,EAAU,mBAAmB,YAAaW,CAAW,EAErDT,EAAO,UAAU,OAAQ,iBAAiB,EAE1CH,EAAK,MAAK,EAGiB,IAAIc,EAAe,gBAAiB,CAC7D,aAAc,KAChB,CAAC,EACkB,QAAO,CAC1B,OACQC,EAAI,CAAE,MAAOA,CAAE,CAAC,CAAC,CAKxB,eAAeJ,EAAUH,EAAM,CAC9BZ,IACA,GAAI,CAEFO,EAAO,UAAU,OAAQ,iBAAiB,EAG5C,MAAMM,EAAe,MAAMf,EAAaY,EAAWV,CAAI,EAIrDW,IAAeX,IAChBQ,EAAW,UAAU,IAAK,iBAAiB,EAC1CA,EAAW,oBAAoB,QAASO,CAAQ,EAChDD,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACb,CAAA,GAED,MAAME,EAAcH,EAAa,KAAK,KAAK,IAAII,GAAKf,EAAWe,CAAE,CAAC,EAAE,KAAK,EAAE,EAI3EZ,EAAU,mBAAmB,YAAaW,CAAW,EAErDT,EAAO,UAAU,OAAQ,iBAAiB,EAGf,IAAIW,EAAe,gBAAiB,CAC7D,aAAc,KAClB,CAAG,EACkB,QAAO,CACzB,OAEOC,EAAI,CAAC,QAAQ,IAAIA,CAAE,CAAE,CAAC"}